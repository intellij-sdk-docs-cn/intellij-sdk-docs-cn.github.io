


<!doctype html>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title>Grouping Actions / IntelliJ Platform SDK  DevGuide</title>
    <link rel="stylesheet" href="/intellij/sdk/docs/app/app.css">
    <link rel="shortcut icon" href="/intellij/sdk/docs/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" sizes="57x57" href="/intellij/sdk/docs/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/intellij/sdk/docs/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/intellij/sdk/docs/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/intellij/sdk/docs/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/intellij/sdk/docs/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/intellij/sdk/docs/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/intellij/sdk/docs/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/intellij/sdk/docs/apple-touch-icon-180x180.png">
    <link rel="mask-icon" href="/intellij/sdk/docs/apple-mask-icon.svg" color="black">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-square70x70logo" content="/intellij/sdk/docs/mstile-70x70.png">
    <meta name="msapplication-TileImage" content="/intellij/sdk/docs/mstile-144x144.png">
    <meta name="msapplication-square150x150logo" content="/intellij/sdk/docs/mstile-150x150.png">
    <meta name="msapplication-wide310x150logo" content="/intellij/sdk/docs/mstile-310x150.png">
    <meta name="msapplication-square310x310logo" content="/intellij/sdk/docs/mstile-310x310.png">
    <meta name="theme-color" content="#000000">
    <meta name="description" content="Documentation for working with and extending the IntelliJ Platform SDK" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://intellij-sdk-docs-cn.github.io/intellij/sdk/docs//tutorials/action_system/grouping_action.html" />
    <meta property="og:site_name" content="JetBrains IntelliJ Platform SDK" />
    <meta property="og:title" content="Grouping Actions" />
    <meta property="og:description" content="Documentation for working with and extending the IntelliJ Platform SDK" />
    <meta property="og:image" content="https://intellij-sdk-docs-cn.github.io/intellij/sdk/docs/jetbrains.png" />
    <meta property="article:modified_time" content="2020-03-18T18:42:50+08:00" />
    <!-- <meta property="article:section" content="" /> 
    <meta property="article:tag" content="" /> -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@JBPlatform" />
    <meta name="twitter:title" content="Grouping Actions" />
    <meta name="twitter:description" content="Documentation for working with and extending the IntelliJ Platform SDK" />
    <meta name="twitter:image" content="https://intellij-sdk-docs-cn.github.io/intellij/sdk/docs/jetbrains.png" />
    <meta class="swiftype" name="product" data-type="string" content="/intellij/sdk/docs/"></meta>
<link  rel="stylesheet" href="/intellij/sdk/docs/app/styles.css"></head>
<body data-id="tutorials/action_system/grouping_action">
<div class="wrapper">
    <section class="panel _nav">
        <header class="panel__header">
            <div class="container">
                <form class="search-box">
                    <label for="search-box__input" class="search-box__label">
                        <input type="text" class="search-box__input" id="search-box__input" placeholder="Search IntelliJ Platform SDK  DevGuide">
                    </label>
                    <div class="search-box__clear" title="Clear"></div>
                </form>
            </div>
        </header>
        <nav class="panel__content">
            <div class="container _nav">
                <menu class="nav-tree"></menu>
            </div>
            <div class="container _footer panel__footer">
                <p><a data-bypass="true" href="//youtrack.jetbrains.com/issues/IJSDK">Send feedback</a></p>
                <p>&copy; 2000&ndash;2020 <a href="//www.jetbrains.com">JetBrains</a> s.r.o.<br>
                    All rights reserved.</p>
            </div>
        </nav>
    </section>

    <main class="panel _main" role="main">
        <header class="panel__header">
            <div class="container">
                <h3>IntelliJ Platform SDK DevGuide</h3>
                
                <div class="panel-trigger"></div>
            </div>
        </header>
        <section class="panel__content">
            <div class="container">
                <article class="article" data-shortcut-switcher="false">
                    <div class="navigation-links _top" data-swiftype-index="false">
                        <a class="navigation-links__prev" href="/tutorials/action_system/working_with_custom_actions.html">Creating Actions</a>
                        
                    </div>
                    <a data-bypass="true" href="https://github.com/intellij-sdk-docs-cn/intellij-sdk-docs-cn/edit/master/tutorials/action_system/grouping_action.md" class="page-link-to-github" target="_blank" title="Edit this page on GitHub">
                        <i class="github-icon"></i>
                        <span class="text">Edit page</span>
                    </a>

                    <h1>Grouping Actions</h1>
                    <!-- Copyright 2000-2020 JetBrains s.r.o. and other contributors. Use of this source code is governed by the Apache 2.0 license that can be found in the LICENSE file. -->

<p>If an implementation requires several actions, or there are simply too many actions that overload the menu, the actions can be placed into groups.
This tutorial demonstrates adding an action to an existing group, creating a new action group, and action groups with a variable number of actions.
The sample code discussed in this tutorial is from the code sample <a href="https://github.com/JetBrains/intellij-sdk-docs/tree/master/code_samples/action_basics" data-bypass="yes" target="_blank"><span><code class="code highlight language-text">action_basics</code></span></a>.</p>

<p>Some content in this tutorial assumes the reader is familiar with the tutorial for <a href="working_with_custom_actions.html"><span>Creating Actions</span></a>.</p>

<ul id="markdown-toc">
  <li><a href="#simple-action-groups" id="markdown-toc-simple-action-groups"><span>Simple Action Groups</span></a>    <ul>
      <li><a href="#creating-simple-groups" id="markdown-toc-creating-simple-groups"><span>Creating Simple Groups</span></a></li>
      <li><a href="#binding-action-groups-to-ui-components" id="markdown-toc-binding-action-groups-to-ui-components"><span>Binding Action Groups to UI Components</span></a></li>
      <li><a href="#adding-a-new-action-to-the-static-grouped-actions" id="markdown-toc-adding-a-new-action-to-the-static-grouped-actions"><span>Adding a New Action to the Static Grouped Actions</span></a></li>
    </ul>
  </li>
  <li><a href="#implementing-custom-action-group-classes" id="markdown-toc-implementing-custom-action-group-classes"><span>Implementing Custom Action Group Classes</span></a>    <ul>
      <li><a href="#extending-defaultactiongroup" id="markdown-toc-extending-defaultactiongroup"><span>Extending DefaultActionGroup</span></a></li>
      <li><a href="#registering-the-custom-action-group" id="markdown-toc-registering-the-custom-action-group"><span>Registering the Custom Action Group</span></a></li>
      <li><a href="#adding-actions-to-the-custom-group" id="markdown-toc-adding-actions-to-the-custom-group"><span>Adding Actions to the Custom Group</span></a></li>
      <li><a href="#providing-specific-behavior-for-the-custom-group" id="markdown-toc-providing-specific-behavior-for-the-custom-group"><span>Providing Specific Behavior for the Custom Group</span></a></li>
    </ul>
  </li>
  <li><a href="#action-groups-with-variable-actions-sets" id="markdown-toc-action-groups-with-variable-actions-sets"><span>Action Groups with Variable Actions Sets</span></a>    <ul>
      <li><a href="#creating-variable-action-group" id="markdown-toc-creating-variable-action-group"><span>Creating Variable Action Group</span></a></li>
      <li><a href="#registering-a-variable-action-group" id="markdown-toc-registering-a-variable-action-group"><span>Registering a Variable Action Group</span></a></li>
      <li><a href="#adding-child-actions-to-the-dynamic-group" id="markdown-toc-adding-child-actions-to-the-dynamic-group"><span>Adding Child Actions to the Dynamic Group</span></a></li>
    </ul>
  </li>
</ul>

<a name="simple-action-groups" class="elem-anchor"></a>
<h2>Simple Action Groups<a href="#simple-action-groups" class="anchor-link"><span></span></a></h2>
<p>In this first example, the action group will be available as a top-level menu item, and actions are represented as drop-down menu items.
The group is based on a default IntelliJ Platform implementation.</p>

<a name="creating-simple-groups" class="elem-anchor"></a>
<h3>Creating Simple Groups<a href="#creating-simple-groups" class="anchor-link"><span></span></a></h3>
<p>Grouping can be registered by adding a <code class="code highlight language-text">&lt;group&gt;</code> element to the <code class="code highlight language-text">&lt;actions&gt;</code> section of a plugin’s <code class="code highlight language-text">plugin.xml</code> file.
This example has no <code class="code highlight language-text">class</code> attribute in the <code class="code highlight language-text">&lt;group&gt;</code> element because the IntelliJ Platform framework will supply a default implementation class for the group. 
This default implementation is used if a set of actions belonging to the group is static, i.e., does not change at runtime, which is the majority of cases.
The <code class="code highlight language-text">id</code> attribute must be unique, so incorporating the plugin ID or package name is the best practice.</p>

<p>The <code class="code highlight language-text">popup</code> attribute determines whether actions in the group are placed in a submenu.
The <code class="code highlight language-text">icon</code> attribute specifies the FQN of an <a href="/intellij/sdk/docs/reference_guide/work_with_icons_and_images.html"><span><code class="code highlight language-text">Icon</code></span></a> object to be displayed.
No <code class="code highlight language-text">compact</code> attribute is specified, which means this group will support submenus.
See <a href="/intellij/sdk/docs/basics/action_system.html#registering-actions-in-pluginxml"><span>Registering Actions in plugin.xml</span></a> for more information about these attributes.</p>

<div class="code-block" data-lang="xml"><code class="code-block__wrapper"><span class="nt">&lt;group</span> <span class="na">id=</span><span class="s">"org.intellij.sdk.action.GroupedActions"</span> <span class="na">text=</span><span class="s">"Static Grouped Actions"</span> <span class="na">popup=</span><span class="s">"true"</span> <span class="na">icon=</span><span class="s">"SdkIcons.Sdk_default_icon"</span><span class="nt">&gt;</span>
<span class="nt">&lt;/group&gt;</span>
</code></div>

<a name="binding-action-groups-to-ui-components" class="elem-anchor"></a>
<h3>Binding Action Groups to UI Components<a href="#binding-action-groups-to-ui-components" class="anchor-link"><span></span></a></h3>
<p>The following sample shows how to use an <code class="code highlight language-text">&lt;add-to-group&gt;</code> element to place a custom action group relative to an entry in the <strong>Tools</strong> menu. 
The attribute <code class="code highlight language-text">relative-to-action</code> references the action <code class="code highlight language-text">id</code> for <code class="code highlight language-text">PopupDialogAction</code>, which is not a native IntelliJ menu entry. 
Rather <code class="code highlight language-text">PopupDialogAction</code> is defined in the same <a href="https://github.com/JetBrains/intellij-sdk-docs/blob/master/code_samples/action_basics/src/main/resources/META-INF/plugin.xml" data-bypass="yes" target="_blank"><span>plugin.xml</span></a> file.
This group is placed after the single entry for the action <code class="code highlight language-text">PopupDialogAction</code>, as defined in the tutorial <a href="working_with_custom_actions.html#registering-an-action-with-the-new-action-form"><span>Creating Actions</span></a>.</p>

<div class="code-block" data-lang="xml"><code class="code-block__wrapper"><span class="nt">&lt;group</span> <span class="na">id=</span><span class="s">"org.intellij.sdk.action.GroupedActions"</span> <span class="na">text=</span><span class="s">"Static Grouped Actions"</span> <span class="na">popup=</span><span class="s">"true"</span> <span class="na">icon=</span><span class="s">"SdkIcons.Sdk_default_icon"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;add-to-group</span> <span class="na">group-id=</span><span class="s">"ToolsMenu"</span> <span class="na">anchor=</span><span class="s">"after"</span> <span class="na">relative-to-action=</span><span class="s">"org.intellij.sdk.action.PopupDialogAction"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/group&gt;</span>
</code></div>

<a name="adding-a-new-action-to-the-static-grouped-actions" class="elem-anchor"></a>
<h3>Adding a New Action to the Static Grouped Actions<a href="#adding-a-new-action-to-the-static-grouped-actions" class="anchor-link"><span></span></a></h3>
<p>The <code class="code highlight language-text">PopupDialogAction</code> implementation will be reused and registered in the newly created static group. 
The <code class="code highlight language-text">id</code> attribute for the reused <code class="code highlight language-text">PopupDialogAction</code> implementation is set to a unique value, <code class="code highlight language-text">org.intellij.sdk.action.GroupPopDialogAction</code>.
This value differentiates this new <code class="code highlight language-text">&lt;action&gt;</code> entry from the <code class="code highlight language-text">id</code> previously used to register this action implementation in the <a href="working_with_custom_actions.html#registering-an-action-with-the-new-action-form"><span>Creating Actions</span></a> tutorial. 
A unique <code class="code highlight language-text">id</code> supports reuse of action classes in more than one menu or group.
The action in this group will display the menu text “A Group Action”.</p>

<div class="code-block" data-lang="xml"><code class="code-block__wrapper"><span class="nt">&lt;group</span> <span class="na">id=</span><span class="s">"org.intellij.sdk.action.GroupedActions"</span> <span class="na">text=</span><span class="s">"Static Grouped Actions"</span> <span class="na">popup=</span><span class="s">"true"</span> <span class="na">icon=</span><span class="s">"SdkIcons.Sdk_default_icon"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;add-to-group</span> <span class="na">group-id=</span><span class="s">"ToolsMenu"</span> <span class="na">anchor=</span><span class="s">"after"</span> <span class="na">relative-to-action=</span><span class="s">"org.intellij.sdk.action.PopupDialogAction"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;action</span> <span class="na">class=</span><span class="s">"org.intellij.sdk.action.PopupDialogAction"</span> <span class="na">id=</span><span class="s">"org.intellij.sdk.action.GroupPopDialogAction"</span>
          <span class="na">text=</span><span class="s">"A Group Action"</span> <span class="na">description=</span><span class="s">"SDK static grouped action example"</span> <span class="na">icon=</span><span class="s">"SdkIcons.Sdk_default_icon"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;/action&gt;</span>
<span class="nt">&lt;/group&gt;</span>
</code></div>

<p>After performing the steps described above the action group and its content will be available in the <strong>Tools</strong> menu.
The underlying <code class="code highlight language-text">PopupDialogAction</code> implementation is reused for two entries in the <strong>Tools</strong> menu:</p>
<ul>
  <li>Once for the top menu entry <strong>Tools | Pop Dialog Action</strong> with the action <code class="code highlight language-text">id</code> equal to <code class="code highlight language-text">org.intellij.sdk.action.PopupDialogAction</code> as set in the <a href="/intellij/sdk/docs/tutorials/action_system/working_with_custom_actions.html#registering-an-action-with-the-new-action-form"><span>Creating Actions</span></a> tutorial.</li>
  <li>A section time for the menu entry <strong>Tools | Static Grouped Actions | A Group Action</strong> with the action <code class="code highlight language-text">id</code> equal to <code class="code highlight language-text">org.intellij.sdk.action.GroupPopDialogAction</code>.</li>
</ul>

<p><img src="img/grouped_action.png" alt="Simple Action Group" width="550px" /></p>

<a name="implementing-custom-action-group-classes" class="elem-anchor"></a>
<h2>Implementing Custom Action Group Classes<a href="#implementing-custom-action-group-classes" class="anchor-link"><span></span></a></h2>
<p>In some cases, the specific behavior of a group of actions needs to depend on the context.
The solution is analagous to making a <a href="working_with_custom_actions.html#extending-the-update-method"><span>single action entry dependent on context</span></a>.</p>

<p>The steps below show how to make a group of actions available and visible if certain conditions are met.
In this case, the condition is having an instance of an editor is available. 
This condition is needed because the custom action group is added to an IntelliJ menu that is only enabled for editing.</p>

<a name="extending-defaultactiongroup" class="elem-anchor"></a>
<h3>Extending DefaultActionGroup<a href="#extending-defaultactiongroup" class="anchor-link"><span></span></a></h3>
<p>The <a href="https://upsource.jetbrains.com/idea-ce/file/idea-ce-e2d423f42b53eafd5c625b93149a0ebc7e49756c/platform/platform-api/src/com/intellij/openapi/actionSystem/DefaultActionGroup.java" data-bypass="yes" target="_blank"><span><code class="code highlight language-text">DefaultActionGroup</code></span></a> is an implementation of <a href="https://upsource.jetbrains.com/idea-ce/file/idea-ce-e2d423f42b53eafd5c625b93149a0ebc7e49756c/platform/editor-ui-api/src/com/intellij/openapi/actionSystem/ActionGroup.java" data-bypass="yes" target="_blank"><span><code class="code highlight language-text">ActionGroup</code></span></a>.
The <code class="code highlight language-text">DefaultActionGroup</code> class is used to add child actions and separators between them to a group.
This class is used if a set of actions belonging to the group does not change at runtime, which is the majority of cases.</p>

<p>As an example, extend <a href="https://upsource.jetbrains.com/idea-ce/file/idea-ce-e2d423f42b53eafd5c625b93149a0ebc7e49756c/platform/platform-api/src/com/intellij/openapi/actionSystem/DefaultActionGroup.java" data-bypass="yes" target="_blank"><span><code class="code highlight language-text">DefaultActionGroup</code></span></a> 
to create the <code class="code highlight language-text">CustomDefaultActionGroup</code> class in the <code class="code highlight language-text">action_basics</code> code sample:</p>

<div class="code-block" data-lang="java"><code class="code-block__wrapper"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">CustomDefaultActionGroup</span> <span class="kd">extends</span> <span class="n">DefaultActionGroup</span> <span class="o">{</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">update</span><span class="o">(</span><span class="n">AnActionEvent</span> <span class="n">event</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// Enable/disable depending on whether user is editing...</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></div>

<a name="registering-the-custom-action-group" class="elem-anchor"></a>
<h3>Registering the Custom Action Group<a href="#registering-the-custom-action-group" class="anchor-link"><span></span></a></h3>
<p>As in the case with the static action group, the action <code class="code highlight language-text">&lt;group&gt;</code> should be declared in the <code class="code highlight language-text">&lt;actions&gt;</code> section of the<code class="code highlight language-text">plugin.xml</code> file, for example, the <a href="https://github.com/JetBrains/intellij-sdk-docs/blob/master/code_samples/action_basics/src/main/resources/META-INF/plugin.xml" data-bypass="yes" target="_blank"><span>action_basics</span></a> plugin. 
The declaration below shows:</p>
<ul>
  <li>The presence of the <code class="code highlight language-text">class</code> attribute in the <code class="code highlight language-text">&lt;group&gt;</code> element, which tells the IntelliJ Platform framework to use <code class="code highlight language-text">CustomDefaultActionGroup</code> rather than the default implementation.</li>
  <li>Setting the group’s <code class="code highlight language-text">popup</code> attribute to allow submenus.</li>
  <li>The <code class="code highlight language-text">&lt;add-to-group&gt;</code> element specifies adding the group in the first position of the existing <code class="code highlight language-text">EditorPopupMenu</code>.</li>
</ul>

<div class="code-block" data-lang="xml"><code class="code-block__wrapper"><span class="nt">&lt;group</span> <span class="na">id=</span><span class="s">"org.jetbrains.tutorials.actions.ExampleCustomDefaultActionGroup"</span> 
     <span class="na">class=</span><span class="s">"org.jetbrains.tutorials.actions.CustomDefaultActionGroup"</span> <span class="na">popup=</span><span class="s">"true"</span>
     <span class="na">text=</span><span class="s">"Example Custom DefaultActionGroup"</span> <span class="na">description=</span><span class="s">"Custom DefaultActionGroup Demo"</span><span class="nt">&gt;</span>
   <span class="nt">&lt;add-to-group</span> <span class="na">group-id=</span><span class="s">"EditorPopupMenu"</span> <span class="na">anchor=</span><span class="s">"first"</span><span class="nt">/&gt;</span>
 <span class="nt">&lt;/group&gt;</span>
</code></div>

<a name="adding-actions-to-the-custom-group" class="elem-anchor"></a>
<h3>Adding Actions to the Custom Group<a href="#adding-actions-to-the-custom-group" class="anchor-link"><span></span></a></h3>
<p>As in <a href="#adding-a-new-action-to-the-static-grouped-actions"><span>Static Grouped Actions</span></a>, the <code class="code highlight language-text">PopupDialogAction</code> action is added as an <code class="code highlight language-text">&lt;action&gt;</code> element in the <code class="code highlight language-text">&lt;group&gt;</code> element. 
In the declaration below, note:</p>
<ul>
  <li>The <code class="code highlight language-text">class</code> attribute in the <code class="code highlight language-text">&lt;action&gt;</code> element has the same FQN to reuse this action implementation.</li>
  <li>The <code class="code highlight language-text">id</code> attribute is unique to distinguish it from other uses of the implementation in the Action System.</li>
</ul>

<div class="code-block" data-lang="xml"><code class="code-block__wrapper"><span class="nt">&lt;group</span> <span class="na">id=</span><span class="s">"org.intellij.sdk.action.CustomDefaultActionGroup"</span> <span class="na">class=</span><span class="s">"org.intellij.sdk.action.CustomDefaultActionGroup"</span> <span class="na">popup=</span><span class="s">"true"</span>
        <span class="na">text=</span><span class="s">"Popup Grouped Actions"</span> <span class="na">description=</span><span class="s">"Custom defaultActionGroup demo"</span> <span class="na">icon=</span><span class="s">"SdkIcons.Sdk_default_icon"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;add-to-group</span> <span class="na">group-id=</span><span class="s">"EditorPopupMenu"</span> <span class="na">anchor=</span><span class="s">"first"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;action</span> <span class="na">class=</span><span class="s">"org.intellij.sdk.action.PopupDialogAction"</span> <span class="na">id=</span><span class="s">"org.intellij.sdk.action.CustomGroupedAction"</span>
          <span class="na">text=</span><span class="s">"A Popup Action"</span> <span class="na">description=</span><span class="s">"SDK popup grouped action example"</span> <span class="na">icon=</span><span class="s">"SdkIcons.Sdk_default_icon"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/group&gt;</span>
</code></div>

<a name="providing-specific-behavior-for-the-custom-group" class="elem-anchor"></a>
<h3>Providing Specific Behavior for the Custom Group<a href="#providing-specific-behavior-for-the-custom-group" class="anchor-link"><span></span></a></h3>
<p>Override the <code class="code highlight language-text">CustomDefaultActionGroup.update()</code> method to make the group visible only if there’s an instance of the editor available. 
Also, a custom icon is added to demonstrate that icons can be changed depending on the action context:</p>

<div class="code-block" data-lang="java"><code class="code-block__wrapper"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">CustomDefaultActionGroup</span> <span class="kd">extends</span> <span class="n">DefaultActionGroup</span> <span class="o">{</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">update</span><span class="o">(</span><span class="n">AnActionEvent</span> <span class="n">event</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// Enable/disable depending on whether user is editing</span>
    <span class="n">Editor</span> <span class="n">editor</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="na">getData</span><span class="o">(</span><span class="n">CommonDataKeys</span><span class="o">.</span><span class="na">EDITOR</span><span class="o">);</span>
    <span class="n">event</span><span class="o">.</span><span class="na">getPresentation</span><span class="o">().</span><span class="na">setEnabled</span><span class="o">(</span><span class="n">editor</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">);</span>
    <span class="c1">// Take this opportunity to set an icon for the menu entry.</span>
    <span class="n">event</span><span class="o">.</span><span class="na">getPresentation</span><span class="o">().</span><span class="na">setIcon</span><span class="o">(</span><span class="n">SdkIcons</span><span class="o">.</span><span class="na">Sdk_default_icon</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></div>

<p>After compiling and running the code sample above and opening a file in the editor and right-clicking, the <strong>Editing</strong> menu will pop up containing a new group of actions in the first position. 
The new group will also have an icon:</p>

<p><img src="img/editor_popup_menu.png" alt="Custom Action Group" width="600px" /></p>

<a name="action-groups-with-variable-actions-sets" class="elem-anchor"></a>
<h2>Action Groups with Variable Actions Sets<a href="#action-groups-with-variable-actions-sets" class="anchor-link"><span></span></a></h2>
<p>If a set of actions belonging to a custom group varies depending on the context, the group must extend <a href="https://upsource.jetbrains.com/idea-ce/file/idea-ce-e2d423f42b53eafd5c625b93149a0ebc7e49756c/platform/editor-ui-api/src/com/intellij/openapi/actionSystem/ActionGroup.java" data-bypass="yes" target="_blank"><span><code class="code highlight language-text">ActionGroup</code></span></a>.
The set of actions in the <code class="code highlight language-text">ActionGroup</code> is dynamically defined.</p>

<a name="creating-variable-action-group" class="elem-anchor"></a>
<h3>Creating Variable Action Group<a href="#creating-variable-action-group" class="anchor-link"><span></span></a></h3>
<p>To create a group of actions with a variable number of actions, extend <code class="code highlight language-text">ActionGroup</code>.
For example, as in the <code class="code highlight language-text">action_basics</code> class <a href="https://github.com/JetBrains/intellij-sdk-docs/blob/master/code_samples/action_basics/src/main/java/org/intellij/sdk/action/DynamicActionGroup.java" data-bypass="yes" target="_blank"><span><code class="code highlight language-text">DynamicActionGroup</code></span></a> code:</p>

<div class="code-block" data-lang="java"><code class="code-block__wrapper"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">DynamicActionGroup</span> <span class="kd">extends</span> <span class="n">ActionGroup</span> <span class="o">{</span>
<span class="o">}</span>
</code></div>

<a name="registering-a-variable-action-group" class="elem-anchor"></a>
<h3>Registering a Variable Action Group<a href="#registering-a-variable-action-group" class="anchor-link"><span></span></a></h3>
<p>To register the dynamic menu group, a <code class="code highlight language-text">&lt;group&gt;</code> attribute needs to be placed in the <code class="code highlight language-text">&lt;actions&gt;</code> section of <a href="https://github.com/JetBrains/intellij-sdk-docs/blob/master/code_samples/action_basics/src/main/resources/META-INF/plugin.xml" data-bypass="yes" target="_blank"><span>plugin.xml</span></a>.
When enabled, this group appears at the entry just below the <a href="#binding-action-groups-to-ui-components"><span>Static Grouped Actions</span></a> in the <strong>Tools</strong> menu:</p>
<div class="code-block" data-lang="xml"><code class="code-block__wrapper"><span class="nt">&lt;group</span> <span class="na">id=</span><span class="s">"org.intellij.sdk.action.DynamicActionGroup"</span> <span class="na">class=</span><span class="s">"org.intellij.sdk.action.DynamicActionGroup"</span> <span class="na">popup=</span><span class="s">"true"</span>
        <span class="na">text=</span><span class="s">"Dynamically Grouped Actions"</span> <span class="na">description=</span><span class="s">"SDK dynamically grouped action example"</span> <span class="na">icon=</span><span class="s">"SdkIcons.Sdk_default_icon"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;add-to-group</span> <span class="na">group-id=</span><span class="s">"ToolsMenu"</span> <span class="na">anchor=</span><span class="s">"after"</span> <span class="na">relative-to-action=</span><span class="s">"org.intellij.sdk.action.GroupedActions"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/group&gt;</span>
</code></div>

<aside class="warning">
  <p> If a<code class="code highlight language-text">&lt;group&gt;</code> element’s <code class="code highlight language-text">class</code> attribute names a class derived from <code class="code highlight language-text">ActionGroup</code>, then any static <code class="code highlight language-text">&lt;action&gt;</code> declarations in that group throw an exception. 
For a statically defined group, use <code class="code highlight language-text">DefaultActionGroup</code>.</p>
</aside>

<a name="adding-child-actions-to-the-dynamic-group" class="elem-anchor"></a>
<h3>Adding Child Actions to the Dynamic Group<a href="#adding-child-actions-to-the-dynamic-group" class="anchor-link"><span></span></a></h3>
<p>To add actions to the <code class="code highlight language-text">DynamicActionGroup</code>, a non-empty array of <code class="code highlight language-text">AnAction</code> instances should be returned from the <code class="code highlight language-text">DynamicActionGroup.getChildren()</code> method. 
Here again, reuse the <code class="code highlight language-text">PopupDialogAction</code> implementation.
This use case is why <code class="code highlight language-text">PopupDialogAction</code> overrides a constructor:</p>

<div class="code-block" data-lang="java"><code class="code-block__wrapper"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">DynamicActionGroup</span> <span class="kd">extends</span> <span class="n">ActionGroup</span> <span class="o">{</span>
  <span class="nd">@NotNull</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">AnAction</span><span class="o">[]</span> <span class="nf">getChildren</span><span class="o">(</span><span class="n">AnActionEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">AnAction</span><span class="o">[]{</span> <span class="k">new</span> <span class="n">PopupDialogAction</span><span class="o">(</span><span class="s">"Action Added at Runtime"</span><span class="o">,</span>
                                                 <span class="s">"Dynamic Action Demo"</span><span class="o">,</span>
                                                 <span class="n">SdkIcons</span><span class="o">.</span><span class="na">Sdk_default_icon</span><span class="o">)</span> <span class="o">};</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></div>

<p>After providing the implementation of <code class="code highlight language-text">DynamicActionGroup</code> and making it return a non-empty array of actions, the third position in the <strong>Tools</strong> Menu will contain a new group of actions:</p>

<p><img src="img/dynamic_action_group.png" alt="Dynamic Action Group" width="600px" /></p>


                    <div class="navigation-links _bottom" data-swiftype-index="false">
                        <a class="navigation-links__prev" href="/tutorials/action_system/working_with_custom_actions.html">Creating Actions</a>
                        
                    </div>
                    <div class="last-modified">
                        Last modified: 18 March 2020
                    </div>
                </article>

                <section class="disqus">
                    <div id="disqus_thread"></div>
                </section>
            </div>
        </section>
    </main>
</div>

<script src="/intellij/sdk/docs/app/app.js" data-baseurl="/intellij/sdk/docs/"></script>

</body>
</html>

