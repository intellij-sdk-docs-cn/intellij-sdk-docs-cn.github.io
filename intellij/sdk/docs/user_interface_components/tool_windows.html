


<!doctype html>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title>Tool Windows / IntelliJ Platform SDK  DevGuide</title>
    <link rel="stylesheet" href="/intellij/sdk/docs/app/app.css">
    <link rel="shortcut icon" href="/intellij/sdk/docs/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" sizes="57x57" href="/intellij/sdk/docs/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/intellij/sdk/docs/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/intellij/sdk/docs/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/intellij/sdk/docs/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/intellij/sdk/docs/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/intellij/sdk/docs/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/intellij/sdk/docs/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/intellij/sdk/docs/apple-touch-icon-180x180.png">
    <link rel="mask-icon" href="/intellij/sdk/docs/apple-mask-icon.svg" color="black">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-square70x70logo" content="/intellij/sdk/docs/mstile-70x70.png">
    <meta name="msapplication-TileImage" content="/intellij/sdk/docs/mstile-144x144.png">
    <meta name="msapplication-square150x150logo" content="/intellij/sdk/docs/mstile-150x150.png">
    <meta name="msapplication-wide310x150logo" content="/intellij/sdk/docs/mstile-310x150.png">
    <meta name="msapplication-square310x310logo" content="/intellij/sdk/docs/mstile-310x310.png">
    <meta name="theme-color" content="#000000">
    <meta name="description" content="Documentation for working with and extending the IntelliJ Platform SDK" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://intellij-sdk-docs-cn.github.io/intellij/sdk/docs//user_interface_components/tool_windows.html" />
    <meta property="og:site_name" content="JetBrains IntelliJ Platform SDK" />
    <meta property="og:title" content="Tool Windows" />
    <meta property="og:description" content="Documentation for working with and extending the IntelliJ Platform SDK" />
    <meta property="og:image" content="https://intellij-sdk-docs-cn.github.io/intellij/sdk/docs/jetbrains.png" />
    <meta property="article:modified_time" content="2020-03-19T13:01:12+08:00" />
    <!-- <meta property="article:section" content="" /> 
    <meta property="article:tag" content="" /> -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@JBPlatform" />
    <meta name="twitter:title" content="Tool Windows" />
    <meta name="twitter:description" content="Documentation for working with and extending the IntelliJ Platform SDK" />
    <meta name="twitter:image" content="https://intellij-sdk-docs-cn.github.io/intellij/sdk/docs/jetbrains.png" />
    <meta class="swiftype" name="product" data-type="string" content="/intellij/sdk/docs/"></meta>
<link  rel="stylesheet" href="/intellij/sdk/docs/app/styles.css"></head>
<body data-id="user_interface_components/tool_windows">
<div class="wrapper">
    <section class="panel _nav">
        <header class="panel__header">
            <div class="container">
                <form class="search-box">
                    <label for="search-box__input" class="search-box__label">
                        <input type="text" class="search-box__input" id="search-box__input" placeholder="Search IntelliJ Platform SDK  DevGuide">
                    </label>
                    <div class="search-box__clear" title="Clear"></div>
                </form>
            </div>
        </header>
        <nav class="panel__content">
            <div class="container _nav">
                <menu class="nav-tree"></menu>
            </div>
            <div class="container _footer panel__footer">
                <p><a data-bypass="true" href="//youtrack.jetbrains.com/issues/IJSDK">Send feedback</a></p>
                <p>&copy; 2000&ndash;2020 <a href="//www.jetbrains.com">JetBrains</a> s.r.o.<br>
                    All rights reserved.</p>
            </div>
        </nav>
    </section>

    <main class="panel _main" role="main">
        <header class="panel__header">
            <div class="container">
                <h3>IntelliJ Platform SDK DevGuide</h3>
                
                <div class="panel-trigger"></div>
            </div>
        </header>
        <section class="panel__content">
            <div class="container">
                <article class="article" data-shortcut-switcher="false">
                    <div class="navigation-links _top" data-swiftype-index="false">
                        
                        <a class="navigation-links__next" href="/user_interface_components/dialog_wrapper.html">DialogWrapper</a>
                    </div>
                    <a data-bypass="true" href="https://github.com/intellij-sdk-docs-cn/intellij-sdk-docs-cn/edit/master/user_interface_components/tool_windows.md" class="page-link-to-github" target="_blank" title="Edit this page on GitHub">
                        <i class="github-icon"></i>
                        <span class="text">Edit page</span>
                    </a>

                    <h1>Tool Windows</h1>
                    <!-- Copyright 2000-2020 JetBrains s.r.o. and other contributors. Use of this source code is governed by the Apache 2.0 license that can be found in the LICENSE file. -->

<a name="tool-windows" class="elem-anchor"></a>
<h2>Tool Windows<a href="#tool-windows" class="anchor-link"><span></span></a></h2>

<p><em>Tool windows</em> are child windows of the IDE used to display information. These windows generally have their own toolbars (referred to as <em>tool window bars</em>) along the outer edges of the main window containing one or more <em>tool window buttons</em>, which activate panels displayed on the left, bottom and right sides of the main IDE window. For detailed information about tool windows, please see <a href="https://www.jetbrains.com/idea/help/tool-windows.html" data-bypass="yes" target="_blank"><span>IntelliJ IDEA Web Help </span></a>.</p>

<p>Each side contains two tool window groups, the primary and the secondary one, and only one tool window from each group can be active at a time.</p>

<p>Each tool window can show multiple tabs (or “contents”, as they are called in the API).
For example, the Run tool window displays a tab for each active run configuration, and the Changes/Version Control tool window displays a fixed set of tabs depending on the version control system used in the project.</p>

<p>There are two main scenarios for the use of tool windows in a plugin.
In the first scenario (used by the Ant and Commander plugins, for example), a tool window button is always visible, and the user can activate it and interact with the plugin functionality at any time.
In the second scenario (used by the <em>Analyze Dependencies</em> action, for example), the tool window is created to show the results of a specific operation, and can be closed by the user after the operation is completed.</p>

<p>In the first scenario, the tool window is registered in <code class="code highlight language-text">plugin.xml</code> using the <code class="code highlight language-text">com.intellij.toolWindow</code> extension point.
The extension point attributes specify all the data which is necessary to display the tool window button:</p>

<ul>
  <li>
    <p>The <code class="code highlight language-text">id</code> of the tool window (corresponds to the text displayed on the tool window button)</p>
  </li>
  <li>
    <p>The <code class="code highlight language-text">anchor</code>, meaning the side of the screen on which the tool window is displayed (“left”, “right” or “bottom”)</p>
  </li>
  <li>
    <p>The <code class="code highlight language-text">secondary</code> attribute, specifying whether the tool window is displayed in the primary or the secondary group</p>
  </li>
  <li>
    <p>The <code class="code highlight language-text">icon</code> to display on the tool window button (13x13 pixels)</p>
  </li>
</ul>

<p>In addition to that, specify the <em>factory class</em>  - the name of a class implementing the
<a href="https://upsource.jetbrains.com/idea-ce/file/idea-ce-e2d423f42b53eafd5c625b93149a0ebc7e49756c/platform/platform-api/src/com/intellij/openapi/wm/ToolWindowFactory.java" data-bypass="yes" target="_blank"><span><code class="code highlight language-text">ToolWindowFactory</code></span></a>
interface.
When the user clicks on the tool window button, the <code class="code highlight language-text">createToolWindowContent()</code> method of the factory class is called, and initializes the UI of the tool window.
This procedure ensures that unused tool windows don’t cause any overhead in startup time or memory usage: if a user does not interact with the tool window of a plugin, no plugin code will be loaded or executed.</p>

<p>If the tool window of a plugin doesn’t need to be displayed for all projects:</p>
<ul>
  <li>For versions 2020.1 and later, also implement the <code class="code highlight language-text">isApplicable(Project)</code> method.</li>
  <li>For versions 2019.3 and earlier, also specify the <code class="code highlight language-text">conditionClass</code> attribute for the <code class="code highlight language-text">&lt;toolWindow&gt;</code> element: the FQN of a class implementing <a href="https://upsource.jetbrains.com/idea-ce/file/idea-ce-e2d423f42b53eafd5c625b93149a0ebc7e49756c/platform/util-rt/src/com/intellij/openapi/util/Condition.java" data-bypass="yes" target="_blank"><span><code class="code highlight language-text">Condition&lt;Project&gt;</code></span></a>, which can be the same class as the tool window factory implementation.
See <a href="#creation-of-plugin"><span>Creation of Plugin</span></a> for more information.</li>
</ul>

<p>Note the condition is evaluated only once when the project is loaded;
to show and hide a tool window dynamically while the user is working with the project use the second method for tool window registration.</p>

<p>The second method involves simply calling
<a href="https://upsource.jetbrains.com/idea-ce/file/idea-ce-e2d423f42b53eafd5c625b93149a0ebc7e49756c/platform/platform-api/src/com/intellij/openapi/wm/ToolWindowManager.java" data-bypass="yes" target="_blank"><span><code class="code highlight language-text">ToolWindowManager.registerToolWindow()</code></span></a>
from the plugin code.
The method has multiple overloads that can be used depending on the task.
When using an overload that takes a component, the component becomes the first content (tab) displayed in the tool window.</p>

<p>Displaying the contents of many tool windows requires access to the indices.
Because of that, tool windows are normally disabled while building indices, unless <code class="code highlight language-text">true</code> is passed as the value of <code class="code highlight language-text">canWorkInDumbMode</code> to the <code class="code highlight language-text">registerToolWindow()</code> function.</p>

<p>As mentioned previously, tool windows can contain multiple tabs, or contents.
To manage the contents of a tool window, call
<a href="https://upsource.jetbrains.com/idea-ce/file/idea-ce-e2d423f42b53eafd5c625b93149a0ebc7e49756c/platform/platform-api/src/com/intellij/openapi/wm/ToolWindow.java" data-bypass="yes" target="_blank"><span><code class="code highlight language-text">ToolWindow.getContentManager()</code></span></a>.
To add a tab (content), first create it by calling
<a href="https://upsource.jetbrains.com/idea-ce/file/idea-ce-e2d423f42b53eafd5c625b93149a0ebc7e49756c/platform/platform-api/src/com/intellij/ui/content/ContentManager.java" data-bypass="yes" target="_blank"><span><code class="code highlight language-text">ContentManager.getFactory().createContent()</code></span></a>,
and then to add it to the tool window using
<a href="https://upsource.jetbrains.com/idea-ce/file/idea-ce-e2d423f42b53eafd5c625b93149a0ebc7e49756c/platform/platform-api/src/com/intellij/ui/content/ContentManager.java" data-bypass="yes" target="_blank"><span><code class="code highlight language-text">ContentManager.addContent()</code></span></a>.</p>

<p>A plugin can control whether the user is allowed to close tabs either globally or on a per-tab basis.
The former is done by passing the <code class="code highlight language-text">canCloseContents</code> parameter to the <code class="code highlight language-text">registerToolWindow()</code> function, or by specifying
<code class="code highlight language-text">canCloseContents="true"</code> in <code class="code highlight language-text">plugin.xml</code>. The default value is <code class="code highlight language-text">false</code>; calling <code class="code highlight language-text">setClosable(true)</code> on <code class="code highlight language-text">ContentManager</code> content will be ignored unless <code class="code highlight language-text">canCloseContents</code> is explicitly set.
If closing tabs is enabled in general, a plugin can disable closing of specific tabs by calling
<a href="https://upsource.jetbrains.com/idea-ce/file/idea-ce-e2d423f42b53eafd5c625b93149a0ebc7e49756c/platform/platform-api/src/com/intellij/ui/content/Content.java" data-bypass="yes" target="_blank"><span><code class="code highlight language-text">Content.setCloseable(false)</code></span></a>.</p>

<a name="how-to-create-a-tool-window" class="elem-anchor"></a>
<h2>How to Create a Tool Window?<a href="#how-to-create-a-tool-window" class="anchor-link"><span></span></a></h2>

<p>The IntelliJ Platform provides the <code class="code highlight language-text">com.intellij.toolWindow</code> <a href="/intellij/sdk/docs/basics/plugin_structure/plugin_extensions.html"><span>extension point</span></a> to create and configure custom tool windows. This extension point is declared using the <a href="https://upsource.jetbrains.com/idea-ce/file/idea-ce-e2d423f42b53eafd5c625b93149a0ebc7e49756c/platform/platform-api/src/com/intellij/openapi/wm/ToolWindowEP.java" data-bypass="yes" target="_blank"><span><code class="code highlight language-text">ToolWindowEP</code></span></a> bean class.</p>

<a name="creation-of-plugin" class="elem-anchor"></a>
<h3>Creation of Plugin<a href="#creation-of-plugin" class="anchor-link"><span></span></a></h3>

<p>To create a plugin that displays a custom tool window, perform the following steps:</p>

<ol>
  <li>In a plugin project, create a class implementing <a href="https://upsource.jetbrains.com/idea-ce/file/idea-ce-e2d423f42b53eafd5c625b93149a0ebc7e49756c/platform/platform-api/src/com/intellij/openapi/wm/ToolWindowFactory.java" data-bypass="yes" target="_blank"><span><code class="code highlight language-text">ToolWindowFactory</code></span></a>.</li>
  <li>In this class, override the <code class="code highlight language-text">createToolWindowContent</code> method. This method specifies the content for the tool window.</li>
  <li>In the plugin configuration file <code class="code highlight language-text">plugin.xml</code>, create the <code class="code highlight language-text">&lt;extensions defaultExtensionNs="com.intellij"&gt;...&lt;/extensions&gt;</code> section.</li>
  <li>To this section, add the <code class="code highlight language-text">&lt;toolWindow&gt;</code> element, and for this element, set the following attributes declared in the <code class="code highlight language-text">ToolWindowEP</code> bean class:
    <ul>
      <li><code class="code highlight language-text">id</code> (required): specifies the tool window caption.</li>
      <li><code class="code highlight language-text">anchor</code> (required): specifies the tool window bar where the tool window button will be displayed. Possible values: “left”, “right”, or “bottom.”</li>
      <li><code class="code highlight language-text">secondary</code> (optional): when <code class="code highlight language-text">true</code>, the tool window button will be shown on the lower part of the tool window bar. Default value is <code class="code highlight language-text">false</code>.</li>
      <li><code class="code highlight language-text">factoryClass</code> (required): specifies the class implementing the <code class="code highlight language-text">ToolWindowFactory</code> interface (see Step 1).</li>
      <li><code class="code highlight language-text">icon</code> (optional): specifies path to the icon that identifies the tool window, if any.</li>
      <li><code class="code highlight language-text">conditionClass</code> (optional): specifies a class that implements <a href="https://upsource.jetbrains.com/idea-ce/file/idea-ce-e2d423f42b53eafd5c625b93149a0ebc7e49756c/platform/util-rt/src/com/intellij/openapi/util/Condition.java" data-bypass="yes" target="_blank"><span><code class="code highlight language-text">Condition&lt;Project&gt;</code></span></a>. Using this class, define conditions to be met to display tool window button. When returning <code class="code highlight language-text">false</code>, the tool window button is not displayed on tool window bar.</li>
    </ul>
  </li>
</ol>

<p>To clarify the above procedure, consider the following fragment of the <code class="code highlight language-text">plugin.xml</code> file:</p>

<div class="code-block" data-lang="xml"><code class="code-block__wrapper"><span class="nt">&lt;extensions</span> <span class="na">defaultExtensionNs=</span><span class="s">"com.intellij"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;toolWindow</span> <span class="na">id=</span><span class="s">"My Sample Tool Window"</span> <span class="na">icon=</span><span class="s">"/myPackage/toolWindowIcon.svg"</span> <span class="na">anchor=</span><span class="s">"right"</span> <span class="na">factoryClass=</span><span class="s">"myPackage.MyToolWindowFactory"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/extensions&gt;</span>
</code></div>

<a name="sample-plugin" class="elem-anchor"></a>
<h3>Sample Plugin<a href="#sample-plugin" class="anchor-link"><span></span></a></h3>

<p>To clarify how to develop plugins that create tool windows, consider the <strong>toolWindow</strong> sample plugin available in the <a href="https://github.com/JetBrains/intellij-sdk-docs/tree/master/code_samples/" data-bypass="yes" target="_blank"><span>code_samples</span></a> directory of the SDK documentation. This plugin creates the <strong>Sample Calendar</strong> tool window that displays the system date, time and time zone.</p>

<p><strong>To run the toolWindow plugin</strong></p>

<ol>
  <li>Start <strong>IntelliJ IDEA</strong> and open the <strong>tool_window</strong> project saved into the <a href="https://github.com/JetBrains/intellij-sdk-docs/tree/master/code_samples/tool_window" data-bypass="yes" target="_blank"><span>code_samples/tool_window</span></a> directory.</li>
  <li>Ensure that the project settings are valid for the environment. If necessary, modify the project settings.
To view or modify the project settings, open the <a href="https://www.jetbrains.com/help/idea/project-structure-dialog.html" data-bypass="yes" target="_blank"><span>Project Structure</span></a> dialog.</li>
  <li>Run the plugin by choosing the <strong>Run | Run</strong> on the main menu.
If necessary, change the <a href="https://www.jetbrains.com/help/idea/run-debug-configuration-plugin.html" data-bypass="yes" target="_blank"><span>Run/Debug Configurations</span></a>.</li>
</ol>

<p>The plugin creates the <strong>Sample Calendar</strong> tool window. When opened, this tool window is similar to the following screen:</p>

<p><img src="img/sample_calendar.png" alt="Sample Calendar" /></p>


                    <div class="navigation-links _bottom" data-swiftype-index="false">
                        
                        <a class="navigation-links__next" href="/user_interface_components/dialog_wrapper.html">DialogWrapper</a>
                    </div>
                    <div class="last-modified">
                        Last modified: 19 March 2020
                    </div>
                </article>

                <section class="disqus">
                    <div id="disqus_thread"></div>
                </section>
            </div>
        </section>
    </main>
</div>

<script src="/intellij/sdk/docs/app/app.js" data-baseurl="/intellij/sdk/docs/"></script>

</body>
</html>

