


<!doctype html>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title>Incompatible Changes in IntelliJ Platform and Plugins API 2020.* / IntelliJ Platform SDK  DevGuide</title>
    <link rel="stylesheet" href="/intellij/sdk/docs/app/app.css">
    <link rel="shortcut icon" href="/intellij/sdk/docs/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" sizes="57x57" href="/intellij/sdk/docs/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/intellij/sdk/docs/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/intellij/sdk/docs/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/intellij/sdk/docs/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/intellij/sdk/docs/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/intellij/sdk/docs/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/intellij/sdk/docs/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/intellij/sdk/docs/apple-touch-icon-180x180.png">
    <link rel="mask-icon" href="/intellij/sdk/docs/apple-mask-icon.svg" color="black">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-square70x70logo" content="/intellij/sdk/docs/mstile-70x70.png">
    <meta name="msapplication-TileImage" content="/intellij/sdk/docs/mstile-144x144.png">
    <meta name="msapplication-square150x150logo" content="/intellij/sdk/docs/mstile-150x150.png">
    <meta name="msapplication-wide310x150logo" content="/intellij/sdk/docs/mstile-310x150.png">
    <meta name="msapplication-square310x310logo" content="/intellij/sdk/docs/mstile-310x310.png">
    <meta name="theme-color" content="#000000">
    <meta name="description" content="Documentation for working with and extending the IntelliJ Platform SDK" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://intellij-sdk-docs-cn.github.io/intellij/sdk/docs//reference_guide/api_changes/api_changes_list_2020.html" />
    <meta property="og:site_name" content="JetBrains IntelliJ Platform SDK" />
    <meta property="og:title" content="Incompatible Changes in IntelliJ Platform and Plugins API 2020.*" />
    <meta property="og:description" content="Documentation for working with and extending the IntelliJ Platform SDK" />
    <meta property="og:image" content="https://intellij-sdk-docs-cn.github.io/intellij/sdk/docs/jetbrains.png" />
    <meta property="article:modified_time" content="2020-03-25T11:05:48+08:00" />
    <!-- <meta property="article:section" content="" /> 
    <meta property="article:tag" content="" /> -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@JBPlatform" />
    <meta name="twitter:title" content="Incompatible Changes in IntelliJ Platform and Plugins API 2020.*" />
    <meta name="twitter:description" content="Documentation for working with and extending the IntelliJ Platform SDK" />
    <meta name="twitter:image" content="https://intellij-sdk-docs-cn.github.io/intellij/sdk/docs/jetbrains.png" />
    <meta class="swiftype" name="product" data-type="string" content="/intellij/sdk/docs/"></meta>
<link  rel="stylesheet" href="/intellij/sdk/docs/app/styles.css"></head>
<body data-id="reference_guide/api_changes/api_changes_list_2020">
<div class="wrapper">
    <section class="panel _nav">
        <header class="panel__header">
            <div class="container">
                <form class="search-box">
                    <label for="search-box__input" class="search-box__label">
                        <input type="text" class="search-box__input" id="search-box__input" placeholder="Search IntelliJ Platform SDK  DevGuide">
                    </label>
                    <div class="search-box__clear" title="Clear"></div>
                </form>
            </div>
        </header>
        <nav class="panel__content">
            <div class="container _nav">
                <menu class="nav-tree"></menu>
            </div>
            <div class="container _footer panel__footer">
                <p><a data-bypass="true" href="//youtrack.jetbrains.com/issues/IJSDK">Send feedback</a></p>
                <p>&copy; 2000&ndash;2020 <a href="//www.jetbrains.com">JetBrains</a> s.r.o.<br>
                    All rights reserved.</p>
            </div>
        </nav>
    </section>

    <main class="panel _main" role="main">
        <header class="panel__header">
            <div class="container">
                <h3>IntelliJ Platform SDK DevGuide</h3>
                
                <div class="panel-trigger"></div>
            </div>
        </header>
        <section class="panel__content">
            <div class="container">
                <article class="article" data-shortcut-switcher="false">
                    <div class="navigation-links _top" data-swiftype-index="false">
                        
                        <a class="navigation-links__next" href="/reference_guide/api_changes/api_changes_list_2019.html">Incompatible Changes in IntelliJ Platform and Plugins API 2019.*</a>
                    </div>
                    <a data-bypass="true" href="https://github.com/intellij-sdk-docs-cn/intellij-sdk-docs-cn/edit/master/reference_guide/api_changes/api_changes_list_2020.md" class="page-link-to-github" target="_blank" title="Edit this page on GitHub">
                        <i class="github-icon"></i>
                        <span class="text">Edit page</span>
                    </a>

                    <h1>Incompatible Changes in IntelliJ Platform and Plugins API 2020.*</h1>
                    <!-- Copyright 2000-2020 JetBrains s.r.o. and other contributors. Use of this source code is governed by the Apache 2.0 license that can be found in the LICENSE file. -->

<!--
Before documenting a breaking API change, please, make sure that the change cannot be avoided 
in an alternative way.

APIs marked with @ApiStatus.Experimental, @ApiStatus.Internal or @ApiStatus.ScheduledForRemoval don't need to be documented.

To document a new incompatible change, add a new line with the problem pattern
followed by a 2nd line with ": "-prefixed human-readable description and recommended fix/action.

The following problem patterns are supported:

<package name> package removed
<class name> class removed
<class name> class renamed to <new class name>

<class name>.<method name>(<human-readable parameters>) method removed
<class name>.<method name>(<human-readable parameters>) method return type changed from <before> to <after>
<class name>.<method name>(<human-readable parameters>) method parameter <type> removed
<class name>.<method name>(<human-readable parameters>) method parameter type changed from <before> to <after>
<class name>.<method name>(<human-readable parameters>) method visibility changed from <before> to <after>
<class name>.<method name>(<human-readable parameters>) method marked final
<class name> (class|interface) now (extends|implements) <class name> and inherits its final method <method name>(<human-readable parameters>)?
<class name> (class|interface) now (extends|implements) <class name> and inherits its abstract method <method name>(<human-readable parameters>)?
<class name>.<method name> method <parameter name> parameter marked @<class name>

<class name>(<human-readable parameters>) constructor removed
<class name>(<human-readable parameters>) constructor parameter <type> removed
<class name>(<human-readable parameters>) constructor parameter type changed from <before> to <after>
<class name>(<human-readable parameters>) constructor visibility changed from <before> to <after>

<class name>.<field name> field removed
<class name>.<field name> field type changed from <before> to <after>
<class name>.<field name> field visibility changed from <before> to <after>

<class name>.<method name>(<human-readable parameters>) marked abstract
<class name>.<method name>(<human-readable parameters>) abstract method added
<class name> class moved to package <package name>

<property name> property removed from resource bundle <bundle name>

where the placeholders must be enclosed in code quotes (`name`):

<class name> is a fully-qualified name of the class, e.g. `com.intellij.openapi.actionSystem.AnAction$InnerClass`.
<method name> is the exact method's name. Note that constructors have dedicated patterns.
<human-readable parameters> is a string representing parameters, which are not necessarily fully qualified. They do not affect the parser. For example, instead of (java.lang.Object, java.util.List, int) you are free to write (Object, List<String>, int)
<parameter name> is exact name of the method's parameter
<property name> is a full name of a property from .properties file, like `some.action.description`
<bundle name> is a fully qualified name of the property bundle, which includes its package, like `message.IdeBundle`

NOTE: If a code change you're trying to document doesn't match any of the above patterns, fill in a ticket in the YouTrack. 
An example of a ticket is https://youtrack.jetbrains.com/issue/PR-1218. Until supported, you may document the change as you prefer, and I will correct it later.

NOTE: You are allowed to prettify the pattern using links: [`org.example.Foo`](https://github.com/JetBrains/intellij-community/tree/master/)

NOTE: Entries not starting with code quotes (`name`) can be added to document non-code changes and will be skipped in API verification.
-->

<p>Please see <a href="/intellij/sdk/docs/reference_guide/api_changes_list.html"><span>Incompatible API Changes</span></a> on how to verify compatibility.</p>

<aside class="note">
  <p> Changes from API marked with <a href="https://upsource.jetbrains.com/idea-ce/file/idea-ce-e2d423f42b53eafd5c625b93149a0ebc7e49756c/platform/util/src/org/jetbrains/annotations/ApiStatus.java" data-bypass="yes" target="_blank"><span><code class="code highlight language-text">org.jetbrains.annotations.ApiStatus.@Experimental/ScheduledForRemoval</code></span></a> are not listed here, as incompatible changes are to be expected.</p>
</aside>

<a name="section" class="elem-anchor"></a>
<h1>2020.2<a href="#section" class="anchor-link"><span></span></a></h1>

<a name="changes-in-intellij-platform-20202" class="elem-anchor"></a>
<h2>Changes in IntelliJ Platform 2020.2<a href="#changes-in-intellij-platform-20202" class="anchor-link"><span></span></a></h2>

<dl>
  <dt><code class="code highlight language-text">com.intellij.psi.util.PsiTreeUtil.processElements(element, processor)</code> method parameter type changed from <code class="code highlight language-text">PsiElementProcessor</code> to <code class="code highlight language-text">PsiElementProcessor&lt;PsiElement&gt;</code></dt>
  <dd>This may break source-compatibility with clients that pass more specific processor. Passing more specific processor was illegal before as well because the <code class="code highlight language-text">processElements</code> passes every descendant <code class="code highlight language-text">PsiElement</code> to the processor regardless of its type. However, this worked with some poorly written clients, e.g. <code class="code highlight language-text">PsiElementProcessor.CollectFilteredElements</code> and <code class="code highlight language-text">PsiElementProcessor.FindFilteredElement</code> (both deprecated now). To simplify the migration, a new three-arg <code class="code highlight language-text">processElements(element, elementClass, processor)</code> is introduced that actually filters by element class, so in most cases, the simplest migration would be to add a wanted element class as a second argument. However, it’s advised to use <code class="code highlight language-text">SyntaxTraverser</code> API instead, which is more rich and flexible.</dd>
</dl>

<a name="section-1" class="elem-anchor"></a>
<h1>2020.1<a href="#section-1" class="anchor-link"><span></span></a></h1>

<a name="changes-in-intellij-platform-20201" class="elem-anchor"></a>
<h2>Changes in IntelliJ Platform 2020.1<a href="#changes-in-intellij-platform-20201" class="anchor-link"><span></span></a></h2>

<dl>
  <dt><code class="code highlight language-text">com.intellij.compiler.ant</code> package removed</dt>
  <dd>‘Generate Ant build’ functionality is removed from the IDE. Delete the code extending this or replace it with a dependency on the <code class="code highlight language-text">generate-ant</code> plugin.</dd>
  <dt><code class="code highlight language-text">org.jetbrains.jps.incremental.ModuleLevelBuilder.getCompilableFileExtensions</code> marked abstract</dt>
  <dd>Implement it in <code class="code highlight language-text">ModuleLevelBuilder</code>’s implementation.</dd>
  <dt><code class="code highlight language-text">com.intellij.codeInsight.TargetElementUtilBase</code> class removed</dt>
  <dd>Use <code class="code highlight language-text">com.intellij.codeInsight.TargetElementUtil</code> instead.</dd>
  <dt><code class="code highlight language-text">com.intellij.psi.stubs.PrebuiltStubsProviderBase</code> class now extends <code class="code highlight language-text">com.intellij.index.PrebuiltIndexProvider</code> and inherits its abstract method <code class="code highlight language-text">getIndexRoot()</code></dt>
  <dd>Use <code class="code highlight language-text">com.intellij.psi.stubs.PlatformPrebuiltStubsProviderBase</code> instead.</dd>
  <dt><code class="code highlight language-text">com.intellij.psi.PsiElementVisitor.visitElement</code> method <code class="code highlight language-text">PsiElement</code> parameter marked <code class="code highlight language-text">@NotNull</code></dt>
  <dd>This may break source-compatibility with inheritors written in Kotlin if they declare parameter type as nullable.</dd>
  <dt><code class="code highlight language-text">com.intellij.psi.PsiElementVisitor.visitFile</code> method <code class="code highlight language-text">PsiFile</code> parameter marked <code class="code highlight language-text">@NotNull</code></dt>
  <dd>This may break source-compatibility with inheritors written in Kotlin if they declare parameter type as nullable.</dd>
  <dt><code class="code highlight language-text">com.intellij.psi.PsiElementVisitor.visitBinaryFile</code> method <code class="code highlight language-text">PsiBinaryFile</code> parameter marked <code class="code highlight language-text">@NotNull</code></dt>
  <dd>This may break source-compatibility with inheritors written in Kotlin if they declare parameter type as nullable.</dd>
  <dt><code class="code highlight language-text">com.intellij.psi.PsiElementVisitor.visitPlainTextFile</code> method <code class="code highlight language-text">PsiPlainTextFile</code> parameter marked <code class="code highlight language-text">@NotNull</code></dt>
  <dd>This may break source-compatibility with inheritors written in Kotlin if they declare parameter type as nullable.</dd>
  <dt><code class="code highlight language-text">com.intellij.psi.PsiElementVisitor.visitErrorElement</code> method <code class="code highlight language-text">PsiErrorElement</code> parameter marked <code class="code highlight language-text">@NotNull</code></dt>
  <dd>This may break source-compatibility with inheritors written in Kotlin if they declare parameter type as nullable.</dd>
  <dt><code class="code highlight language-text">com.intellij.psi.PsiElementVisitor.visitPlainText</code> method <code class="code highlight language-text">PsiPlainText</code> parameter marked <code class="code highlight language-text">@NotNull</code></dt>
  <dd>This may break source-compatibility with inheritors written in Kotlin if they declare parameter type as nullable.</dd>
  <dt><code class="code highlight language-text">com.intellij.psi.PsiElementVisitor.visitDirectory</code> method <code class="code highlight language-text">PsiDirectory</code> parameter marked <code class="code highlight language-text">@NotNull</code></dt>
  <dd>This may break source-compatibility with inheritors written in Kotlin if they declare parameter type as nullable.</dd>
  <dt><code class="code highlight language-text">com.intellij.psi.PsiElementVisitor.visitComment</code> method <code class="code highlight language-text">PsiComment</code> parameter marked <code class="code highlight language-text">@NotNull</code></dt>
  <dd>This may break source-compatibility with inheritors written in Kotlin if they declare parameter type as nullable.</dd>
  <dt><code class="code highlight language-text">com.intellij.psi.PsiElementVisitor.visitWhiteSpace</code> method <code class="code highlight language-text">PsiWhiteSpace</code> parameter marked <code class="code highlight language-text">@NotNull</code></dt>
  <dd>This may break source-compatibility with inheritors written in Kotlin if they declare parameter type as nullable.</dd>
  <dt><code class="code highlight language-text">com.intellij.psi.PsiElementVisitor.visitOuterLanguageElement</code> method <code class="code highlight language-text">OuterLanguageElement</code> parameter marked <code class="code highlight language-text">@NotNull</code></dt>
  <dd>This may break source-compatibility with inheritors written in Kotlin if they declare parameter type as nullable.</dd>
  <dt><code class="code highlight language-text">com.intellij.codeInspection.unused.ImplicitPropertyUsageProvider.isUsed</code> method <code class="code highlight language-text">Property</code> parameter marked <code class="code highlight language-text">@NotNull</code></dt>
  <dd>This may break source-compatibility with inheritors written in Kotlin if they declare parameter type as nullable.</dd>
  <dt><code class="code highlight language-text">com.intellij.lang.ReadOnlyASTNode</code> class removed</dt>
  <dd>Use <code class="code highlight language-text">com.intellij.testFramework.ReadOnlyLightVirtualFile</code>-based PSI instead.</dd>
  <dt>Java code migrated to use <code class="code highlight language-text">TYPE_USE</code> nullability annotations</dt>
  <dd>Due to some problems in Kotlin compiler existing Kotlin code might become incompilable in rare cases if a method written in Java returning an array and annotated as <code class="code highlight language-text">@Nullable</code> or <code class="code highlight language-text">@NotNull</code> is used or overridden.</dd>
  <dt><code class="code highlight language-text">com.intellij.navigation.ChooseByNameContributorEx.processNames</code> method parameter type changed from <code class="code highlight language-text">Processor&lt;String&gt;</code> to <code class="code highlight language-text">Processor&lt;? extends String&gt;</code></dt>
  <dd>This may break source-compatibility with inheritors written in Kotlin.</dd>
  <dt><code class="code highlight language-text">com.intellij.navigation.ChooseByNameContributorEx.processElementsWithName</code> method parameter type changed from <code class="code highlight language-text">Processor&lt;NavigationItem&gt;</code> to <code class="code highlight language-text">Processor&lt;? extends NavigationItem&gt;</code></dt>
  <dd>This may break source-compatibility with inheritors written in Kotlin.</dd>
  <dt>Images module functionality (package <code class="code highlight language-text">org.intellij.images.*</code>) extracted to plugin</dt>
  <dd>The dependency <a href="/intellij/sdk/docs/basics/plugin_structure/plugin_dependencies.html"><span>must be declared</span></a> explicitly now:
    <ul>
      <li>Add <code class="code highlight language-text">&lt;depends&gt;com.intellij.platform.images&lt;/depends&gt;</code> in <code class="code highlight language-text">plugin.xml</code></li>
      <li>Add to <code class="code highlight language-text">build.gradle</code>:
<div class="code-block" data-lang="groovy"><code class="code-block__wrapper"><span class="n">intellij</span> <span class="o">{</span>
  <span class="n">plugins</span> <span class="o">=</span> <span class="o">[</span><span class="s1">'platform-images'</span><span class="o">]</span>
<span class="o">}</span>
</code></div>
      </li>
    </ul>
  </dd>
</dl>

<a name="changes-in-python-plugin-20201" class="elem-anchor"></a>
<h2>Changes in Python plugin 2020.1<a href="#changes-in-python-plugin-20201" class="anchor-link"><span></span></a></h2>

<dl>
  <dt><code class="code highlight language-text">com.jetbrains.python.psi.PyCallExpression.PyMarkedCallee</code> class removed</dt>
  <dd>Use <code class="code highlight language-text">com.jetbrains.python.psi.types.PyCallableType</code> instead.</dd>
  <dt><code class="code highlight language-text">com.jetbrains.python.psi.PyCallExpression.multiResolveCallee</code> method return type changed from <code class="code highlight language-text">List&lt;PyMarkedCallee&gt;</code> to <code class="code highlight language-text">List&lt;PyCallableType&gt;</code></dt>
  <dd>Use <code class="code highlight language-text">com.jetbrains.python.psi.types.PyCallableType</code> instead of <code class="code highlight language-text">com.jetbrains.python.psi.PyCallExpression.PyMarkedCallee</code>.</dd>
</dl>


                    <div class="navigation-links _bottom" data-swiftype-index="false">
                        
                        <a class="navigation-links__next" href="/reference_guide/api_changes/api_changes_list_2019.html">Incompatible Changes in IntelliJ Platform and Plugins API 2019.*</a>
                    </div>
                    <div class="last-modified">
                        Last modified: 25 March 2020
                    </div>
                </article>

                <section class="disqus">
                    <div id="disqus_thread"></div>
                </section>
            </div>
        </section>
    </main>
</div>

<script src="/intellij/sdk/docs/app/app.js" data-baseurl="/intellij/sdk/docs/"></script>

</body>
</html>

